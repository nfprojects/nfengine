{
  "comments": [
    {
      "key": {
        "uuid": "facab960_5ed75423",
        "filename": "nfEngine/nfCommon/Win/SystemInfoPlatform.cpp",
        "patchSetId": 19
      },
      "lineNbr": 28,
      "author": {
        "id": 1002655
      },
      "writtenOn": "2015-06-08T07:16:20Z",
      "side": 1,
      "message": "We need to finally finish this issue. I did some background research, it looks like GlobalMemoryStatusEx is not a good direction for us.\n\nAs you know, we have problems with free paged memory. I looked onto MEMORYSTATUSEX structure reference, this is what I found:\n\"ullTotalPageFile:\nThe current committed memory limit for the system or the current process, whichever is smaller, in bytes. To get the system-wide committed memory limit, call GetPerformanceInfo\"\n\nThis might be the reason why for PCs with disabled page file we get incorrect values and tests fail. ullTotalPageFile has some other, lower value, not the one that we\u0027d expect. I suggest checking GetPerformanceInfo, even though it needs more calculation to be done because of page-count-to-kb translation, it might keep correct information. Please, do some research and tell me what came out. Since this is happening on my PC, I\u0027m ready to verify your patch before submitting if you send me one (not a patch-set, a .patch file generated by git-format-patch :) )",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "8ecd604fb5feb6b6a54fa439f1097428cd4406ee",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_3961ca39",
        "filename": "nfEngine/nfCommon/Win/SystemInfoPlatform.cpp",
        "patchSetId": 19
      },
      "lineNbr": 28,
      "author": {
        "id": 1003055
      },
      "writtenOn": "2015-06-08T11:38:02Z",
      "side": 1,
      "message": "I\u0027ve researched it and done tests with various amounts of SWAP declared and came to the same conclusion...as is described on MSDN as I\u0027ve found out later:\nhttps://msdn.microsoft.com/en-us/library/windows/desktop/aa965225(v\u003dvs.85).aspx\n\nYou can see there, that:\n1. We can\u0027t get AvailableSwap from GetPerformanceInfo;\n2. the TotalSwap we get from both is the same one - we need to do subtraction;\n3. You can see there that GlobalMemoryStatusEx should be enough for us.\n\nPlease comment further on this.",
      "parentUuid": "facab960_5ed75423",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "8ecd604fb5feb6b6a54fa439f1097428cd4406ee",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_3919ca88",
        "filename": "nfEngine/nfCommon/Win/SystemInfoPlatform.cpp",
        "patchSetId": 19
      },
      "lineNbr": 28,
      "author": {
        "id": 1002655
      },
      "writtenOn": "2015-06-08T12:25:23Z",
      "side": 1,
      "message": "I will check it further on then. For now please, avoid new patch sets. 19 is already enough as it is. I will let you know when I\u0027ll get some more info.",
      "parentUuid": "facab960_3961ca39",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "8ecd604fb5feb6b6a54fa439f1097428cd4406ee",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_39f547ee",
        "filename": "nfEngine/nfCommon/Win/SystemInfoPlatform.cpp",
        "patchSetId": 19
      },
      "lineNbr": 28,
      "author": {
        "id": 1002655
      },
      "writtenOn": "2015-06-08T20:02:44Z",
      "side": 1,
      "message": "Indeed, this is weird. We\u0027ll stay with what we have. Just add a check if TotalSwap is less than TotalPhys.",
      "parentUuid": "facab960_3919ca88",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "8ecd604fb5feb6b6a54fa439f1097428cd4406ee",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_df5efb11",
        "filename": "nfEngine/nfCommon/Win/SystemInfoPlatform.cpp",
        "patchSetId": 19
      },
      "lineNbr": 28,
      "author": {
        "id": 1003055
      },
      "writtenOn": "2015-06-09T07:46:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "facab960_39f547ee",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "8ecd604fb5feb6b6a54fa439f1097428cd4406ee",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}